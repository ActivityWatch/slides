<html>
  <head>
    <title>ActivityWatch slides</title>
    <link rel="stylesheet" href="css/reveal.css">
    <!--link rel="stylesheet" href="css/theme/white.css"-->
    <!--link rel="stylesheet" href="css/theme/black.css"-->
    <link rel="stylesheet" href="css/theme/night.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/atom-one-dark.min.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h2 style="line-height: 2em">
            <img src="logo.png" style="display: inline-block; box-shadow: none; border: none; height: 1.5em; vertical-align: middle; background: rgba(0, 0, 0, 0)">
            ActivityWatch
          </h2>
          <p>
            Track how you spend your time on your devices.
            <br>Cross-platform, extensible, privacy-focused.
          </p>

          <small>
            <p>
              Download it: <a href="https://activitywatch.net">activitywatch.net</a>
              <br>
              Get the source: <a href="https://github.com/ActivityWatch/activitywatch">github.com/ActivityWatch</a>
            </p>

            <p>
              <small>
                Slides available at <a href="https://activitywatch.net/slides/">activitywatch.net/slides</a>
                <br>
                <minor>source on <a href="https://github.com/ActivityWatch/slides">GitHub</a>, updated 2019-11-12</minor>
              </small>
            </p>
            </p>

            <p>
            </p>
          </small>

        </section>

        <section class="left-align">
          <h3>
            Yet another time tracker? Why?
          </h3>

          <ul>
            <li> Existing time trackers were bad
            <ul>
              <li> In many ways, more on that later.
              <li> Frustrating if you think tracking is important.
            </ul>
            <li> Easy to build something basic
            <ul>
              <li> A challenge to build something better than what exists
            </ul>
            <li> Important problem in the long term
            <li> Great exercise in software engineering
            <li> Fun
          </ul>
        </section>

        <section>
          <section>
            <h3>
              What's wrong with all the others?
            </h3>

            <p>
              <small>
                Every solution we've seen has at least 2 of these issues.
              </small>
            </p>

            <ul>
              <li> Not open source

              <li> Privacy/security issues <span style="color: grey; font-size: 0.75em">(they own your data)</span>

              <li> No syncronization/backup of data
                <div>
                  <small>
                    <minor>we've not solved this yet, but working on it</minor>
                  </small>
                </div>

              <li> Hard/impossible to extend
                <div>
                <small>
                  <minor>Not built to be extended. Takes a lot of work to collect a little more data</minor>
                </small>
                </div>

              <li> Low quality of data
              <ul>
                <li> Limited collection/detail <minor>we want to collect everything*</minor>
                <li> Bad resolution <minor>to save storage space</minor>
              </ul>
            </ul>

            <p>
              <div class="footnote">
                <small class="left-align">
                    *Or rather, enable the collection of everything.
                </small>
              </div>
            </p>
          </section>

          <section>
            <p>
              <a href="https://github.com/ActivityWatch/activitywatch/tree/cb16e91ea15a9c0b1d7358fbd6f57e141e25ce15#is-this-yet-another-time-tracker">
                Feature comparison in the README
              </a>
            </p>
          </section>

        </section>

        <section>
          <h3>
            Will they improve anytime soon?
          </h3>

          <div style="float: right; width: 35%">
            <a href="">
              <img src="./img/rescuetime-issue-xbox360.png"/>
            </a>
          </div>
          <div style="width: 65%">
            <ul>
              <li> Not any money in it
              <ul>
                <li> ...with existing businessplans
              </ul>
              <li> Technical debt
                <ul>
                  <li> Visualization is hard and messy
                  <li> Non-modularity <minor>bad design</minor>
                  <li> Locked into old design choices
                </ul>
              <li> Lack of vision
                <div>
                  <small>
                    <minor>Nothing has changed for many years</minor>
                  </small>
                  <br>
                </div>
              <li> So... no
            </ul>
          </div>
        </section>

        <section>
            <h3>
              History of the project
            </h3>

            <!-- Maybe I should have an introduction about why I cared about this for so long? -->

            <small>
              <ul>
                <li><b>2014-12-30:</b>
                  <a href="https://github.com/ActivityWatch/activitywatch-old/commit/689440200bd51f7ee7c0e4e7ef63bc2b8fc53c3f">
                    First commit
                  </a>
                  on a prototype.
                <li><b>2016-04:</b>
                  Deprecated the prototype and
                  <a href="https://github.com/ActivityWatch/activitywatch/commit/a2f3d9dc35a2efb155c02821b7d59b84eec0d776">
                   started working
                  </a>
                  on the new repo.
                <li><b>2016 (summer):</b> Worked on it with my brother and a few friends in my apartment.
                <li><b>2017-05:</b> Mature API, works well, almost ready with a public release.
                <li><b>2017-11:</b> v0.7 released, it now works really well and reliably.
                <li><b>2018:</b> Several beta releases for v0.8, improvements across the board.
                <li><b>2018-09-25:</b> Johan starts working on aw-server-rust
                <li><b>2018-09-25:</b> Johan starts working on aw-server-rust
                <li><b>2019-03:</b> Android beta released (also compatible with Oculus Quest)
                <li><b>2019-11-12:</b> v0.8 released, containing some of our most requested features.
                <li><b>Future:</b> Syncing, switch to aw-server-rust, more visualizations and insight.
              </ul>
            </small>
        </section>

        <section>
          <h5>Screenshot from 2017</h5>
          <img src="./img/screenshot-webui-2017.png" style="width: 15em; border: 1px"/>
        </section>

        <section>
          <h5>Screenshot from 2018</h5>
          <img src="./img/screenshot-webui-2018.png" style="width: 15em; border: 1px;"/>
        </section>

        <section>
          <h5>Screenshot from 2019</h5>
          <img src="./img/screenshot-webui-2019.png" style="width: 20em; border: 1px;"/>
        </section>

        <section>
          <h5>Some stats</h5>

          <p>
            <ul>
              <li> &gt;25,000 downloads <minor>doubling <a href="https://docs.google.com/spreadsheets/d/13jUkA7p0nYUYALieQ3yuac3-NTEn7qqushcVCbHVczQ/edit#gid=0">~every year</a></minor>
              <li> &gt;2.3k stars on GitHub
              <li> &gt;186 votes on ProductHunt <minor style="font-size: 0.8em">#3 on 2019-07-07</minor>
              <li> &gt;187 votes on AlternativeTo <minor style="font-size: 0.8em">#2 Time-tracking tool</minor>
              <li> Rated 4.8/5 by 34 reviewers on <a href="https://alternativeto.net/software/activitywatch/reviews/">AlternativeTo</a>
              <li> &gt;$635 donated ()
              <li> (insert website traffic stats)
            </ul>
          </p>
        </section>

        <section>
          <h3>
            About the code
          </h3>

          <ul>
            <li> Written in:
              <ul>
                <li>Python 3.6+ (with mypy)
                <li>JavaScript/TypeScript
                <li>Rust
              </ul>
            <li> Code is clean and easy to read
            <li> Split up into several repositories
              <br><minor>for better and worse</minor>
            <li> Core (Python) has good test coverage (~95%)
              <br><minor>typechecked using mypy</minor>
          </ul>
        </section>

        <section>
          <section>
            <h3>Architecture</h3>

            <ul>
              <li>Server
                <ul>
                  <li>Manages all data and supports basic querying
                </ul>
              <li>Clients
                <ul>
                  <li>Watchers
                  <ul>
                    <li>A type of client that gathers data and sends it to the server.
                    <li>Examples: Active window, AFK, Web browser
                  </ul>
                  <li>Web UI
                    <ul>
                      <li>Written with Vue.js, visualizations in D3.js, uses server API for querying
                      <li>Built versions are hosted by the server
                    </ul>
                  <li>Custom interfaces/visualization/analysis tools
                </ul>
              <li>Core library <minor>datastructures, transforms</minor>
              <li>Client library <minor>Makes it easy to write clients</minor>
            </ul>
          </section>

          <section>
            <h4>Dataformat</h4>

            <ul>
              <li>Buckets are containers of events
              <li>Usually one bucket per watcher
              <li>Events are simple JSON
            </ul>
          </section>

          <section>
            <h4>Anatomy of a window event</h4>
            <pre><code class="json">{
  "timestamp": "2017-05-10T10:26:52Z", # ISO8601 format.
  "duration": 128.12,                  # In seconds.
  "data": {                            # Any JSON object,
      "app": "google-chrome",          # depends on eventtype.
      "title": "ErikBjare on GitHub"
  }
}</code></pre>
          </section>

          <section>
            <h5>Making watcher-writing easy</h5>

            <small>
              <p>
                We want to be able to write a simple watcher in as few lines of code as possible.
                So <b>how do we make watchers easy to write?</b>
              </p>
            </small>

            <p>
              Heartbeats to the rescue!
                <br><small><minor>idea taken from WakaTime</minor></small>
            </p>

            <small>
              A heartbeat is a zero-duration event meant to update the latest event.
              <br>
                Or, if no recent event is available, become the latest event.
            </small>
          </section>

          <section>
            <h4>Merging events with the heartbeat method</h4>

            <pre><code class="lang-python" data-trim>e1 = Event(timestamp="...10:26:52", duration=10, ...)
e2 = Event(timestamp="...10:27:12", duration=0, ...)

def merge(e1, e2, pulsetime=10):
  # e1 is the last recorded event
  # e2 is a heartbeat
  if(e1.timestamp + e1.duration + pulsetime &lt;= e2.timestamp \
     and e1.data == e2.data):
    # e2 had identical data and was within pulsetime window
    return [Event(timestamp=e1.timestamp,
                  duration=e2.timestamp - e1.timestamp,
                  data=e1.data)]
  else:
    return [e1, e2]</code></pre>

          </section>
        </section>

        <section>
          <h3>
            How is it done?
          </h3>

          <ul>
            <li> <b>AFK detection</b>
              <ul>
                <li>If no input for x min, user became inactive x min ago
                <ul>
                  <li> Not perfect, but works surprisingly well
                </ul>
                <li>RescueTime uses x=5min
                <li>Data collected with smaller x can be converted to higher x
                  <br><minor>Not the other way around</minor>
              </ul>
            <li> <b>Active window</b>
              <ul>
                <li>Poll the macOS/X11/Windows API every x seconds
                <li>Send a heartbeat to the server with the data
              </ul>
            <li> Others
              <ul>
                <li> Similar methods, much can be done with heartbeats.
              </ul>
          </ul>
        </section>

        <section>
          <h3>
            Simple examples of extensions
          </h3>

          <small>
          <p>
            Here are a few short clients that do meaningful stuff:
          </p>

          <ul>
            <li>
              <a href="https://github.com/ActivityWatch/aw-watcher-tmux/blob/master/aw-watcher-tmux">
                A watcher that collects tmux data in &lt20 lines (LLOC) of bash
              </a>
            <li>
              <a href="https://github.com/ActivityWatch/aw-fakedata">
                A client script that generates fake data
              </a>
              <minor>useful in testing</minor>
            <li>
              <a href="https://github.com/ActivityWatch/aw-detector/">
                 A client library that does pattern matching on recent events
              </a>
              <ul>
                <li>Could be used to generate real-time statuses such as:
                    <br>
                    <i>"Erik is currently working on ActivityWatch"</i>
                    <br>
                    <i>"Erik is currently playing Kerbal Space Program"</i>
              </ul>
          </ul>
          </small>
        </section>

        <section>
          <h5>What do you want to hear more about?</h5>
          <small style="text-align: left">
            I can talk forever, here are your options:
            <p>
              <ul>
                <li> Getting users / marketing
                <li> Our CI setup
                <li> Finding an important problem
                <li> Building cross-platform apps
                <li> Running an OSS project with just two people
                <li> Building community (running issues and forum)
                <li> Letting users help you with direction/what to build next
                <li> Building reliable software
                <li> Rust vs Python, TypeScript vs JavaScript
              </ul>
            </p>
          </small>


        </section>

        <section>
          <h3>That's all!</h3>

          <p>
            Download it at <a href="https://activitywatch.net/">activitywatch.net</a>
          </p>
        </section>
      </div>

    </div>
    <script src="js/reveal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: Reveal.navigateNext,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // Hides the address bar on mobile devices
        hideAddressBar: true,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Transition speed
        transitionSpeed: 'default', // default/fast/slow

        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Parallax background image
        parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

        // Parallax background size
        parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

        // Number of pixels to move the parallax background per slide
        // - Calculated automatically unless specified
        // - Set to 0 to disable movement along an axis
        parallaxBackgroundHorizontal: null,
        parallaxBackgroundVertical: null

      });

      Reveal.configure({
        keyboard: {
          13: 'next', // go to the next slide when the ENTER key is pressed
          32: 'next' // don't do anything when SPACE is pressed (i.e. disable a reveal.js default binding)
        }
      });
    </script>
  </body>
</html>
